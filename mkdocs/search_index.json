{
    "docs": [
        {
            "location": "/", 
            "text": "\u575a\u6301...", 
            "title": "\u5f15\u8a00"
        }, 
        {
            "location": "/js/observer/", 
            "text": "\u4ee3\u7801\u541b\n\n\nvar target, content;\nclass Dep {\n    constructor() {\n        this.watchs = []\n    }\n    addWatch() {\n        target\nthis.watchs.push(target)\n    }\n    notify() {\n        this.watchs.forEach(w=\nw.update())\n    }\n}\nfunction observer(data) {\n    if (Object.prototype.toString.call(data) === '[object Object]') {\n        Object.keys(data).forEach(key=\n {\n            var dep = new Dep()\n            var val = data[key]\n            observer(data[key])\n            Object.defineProperty(data, key, {\n                enumerable: true,\n                configurable: true,\n                get: function () {\n                    dep.addWatch()\n                    return val\n                },\n                set: function (newVal) {\n                    if (val === newVal) {\n                        return\n                    }\n                    val = newVal\n                    dep.notify()\n                    observer(newVal)\n                }\n            })\n\n        })\n    }\n}\nclass Watch {\n    constructor(exp, fn) {\n        this.exp = exp\n        this.update = fn\n        target = this\n        typeof exp === 'function' ? exp.call(content) : eval(`content.${exp}`)\n    }\n}\n\n\n\n\n//test\nvar testData = {\n    \ntitle\n: \n\u6d77\u62a5\u6807\u9898\n,\n    \npics\n: [\n        {\nurl\n: \n//p0.meituan.net/dprainbow/61daec840616895bc21a4a58cd68a38817000.png\n, \ndesc\n: \n\u5e7c\u7a1a\u4e86\n},\n        {\nurl\n: \n//p0.meituan.net/dprainbow/61daec840616895bc21a4a58cd68a38817000.png\n, \ndesc\n: \n\u5e7c\u7a1a\u4e86\n}\n    ],\n    \nshop_info\n: {\n        \nshop_id\n: 9380423,\n        \nshop_name\n: \n\u5df4\u9ece\u5a5a\u7eb1\u56fd\u9645\u65d7\u8230\u5e97\n,\n        \nbranch_name\n: \n\u677e\u6c5f\u5e97\n,\n        \ncity_name\n: \n\u4e0a\u6d77\n\n    },\n    \ndesc\n: \n\u8fd9\u662f\u4e00\u6bb5\u5185\u5bb9\u4e00\u6bb5\u5185\u5bb9\n,\n    \ndiscount_info\n: \n\u53c8\u56de\u6765\u4e86\n,\n    \nallow_fabulous\n: false, \n$$id\n: \na0ccdf50-ae2a-11e7-88bc-89a8406df769\n\n}\ncontent = testData\nobserver(testData)\nnew Watch('title',function(){\n    console.log(\ntodo update page title!\n)\n})\n\nnew Watch('shop_info.shop_name',function(){\n    console.log(\ntodo update shop_info.shop_name!\n)\n})\n\nnew Watch(function(){\n    return this.shop_info.shop_name + \n(\n + this.shop_info.branch_name + \n)\n\n},function(){\n    console.log(\ntodo update desc to dom\n )\n})\nconsole.log(\nupdate title:\n)\ntestData.title = \n\u7b2c\u4e00\u6b21\u66f4\u65b0\n\ntestData.title = \n\u7b2c\u4e8c\u6b21\u66f4\u65b0\n\nconsole.log(\nupdate shop_info\uff1a\n)\ntestData.shop_info = {\n    \nshop_id\n: 1380423,\n    \nshop_name\n: \n\u5df4\u9ece\u5a5a\u7eb1\u56fd\u9645\u65d7\u8230\u5e97\n,\n    \nbranch_name\n: \n\u660c\u5e73\u5e97\n,\n    \ncity_name\n: \n\u5317\u4eac\n\n}\n\n\n\n\n\u56fe\u89e3\u541b\n\n\n\n\n\n\n\u4eba\u8bdd\n\n\n\u4f9d\u8d56\u6536\u96c6\u5173\u952e\u70b9\uff1a\n\n\n1.\u4f7f\u7528Object.defineProperty\u8bbe\u7f6e\u5c5e\u6027\u4e3a\u53ef\u89c2\u6d4b\u5c5e\u6027\uff0c\u5373\u53d6\u503c\u89e6\u53d1get \u8d4b\u503c\u89e6\u53d1set\n2.\u521d\u59cb\u5316Watch\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u628a\u5f53\u524d\u5bf9\u8c61\u8bbe\u7f6e\u4e3a\u5168\u5c40\u7684target\uff0c\u6267\u884c\u89c2\u5bdf\u8005\u8868\u8fbe\u5f0f\uff0c\u89e6\u53d1\u6240\u4f9d\u8d56\u7684\u5c5e\u6027\u7684get\u51fd\u6570(\u8fdb\u884c\u4f9d\u8d56\u6536\u96c6)\n\n\n\n\u4f9d\u8d56\u6536\u96c6\u5b8c\u6210\u540e\uff0c\u5b9e\u73b0\u8ba1\u7b97\u5c5e\u6027\uff0c\u6570\u636e-\n\u89c6\u56fe\u5355\u9879\u7ed1\u5b9a\uff0cso easy!!!", 
            "title": "\u6570\u636e\u76d1\u542c\u548c\u4f9d\u8d56\u6536\u96c6"
        }, 
        {
            "location": "/js/observer/#_1", 
            "text": "var target, content;\nclass Dep {\n    constructor() {\n        this.watchs = []\n    }\n    addWatch() {\n        target this.watchs.push(target)\n    }\n    notify() {\n        this.watchs.forEach(w= w.update())\n    }\n}\nfunction observer(data) {\n    if (Object.prototype.toString.call(data) === '[object Object]') {\n        Object.keys(data).forEach(key=  {\n            var dep = new Dep()\n            var val = data[key]\n            observer(data[key])\n            Object.defineProperty(data, key, {\n                enumerable: true,\n                configurable: true,\n                get: function () {\n                    dep.addWatch()\n                    return val\n                },\n                set: function (newVal) {\n                    if (val === newVal) {\n                        return\n                    }\n                    val = newVal\n                    dep.notify()\n                    observer(newVal)\n                }\n            })\n\n        })\n    }\n}\nclass Watch {\n    constructor(exp, fn) {\n        this.exp = exp\n        this.update = fn\n        target = this\n        typeof exp === 'function' ? exp.call(content) : eval(`content.${exp}`)\n    }\n}  //test\nvar testData = {\n     title :  \u6d77\u62a5\u6807\u9898 ,\n     pics : [\n        { url :  //p0.meituan.net/dprainbow/61daec840616895bc21a4a58cd68a38817000.png ,  desc :  \u5e7c\u7a1a\u4e86 },\n        { url :  //p0.meituan.net/dprainbow/61daec840616895bc21a4a58cd68a38817000.png ,  desc :  \u5e7c\u7a1a\u4e86 }\n    ],\n     shop_info : {\n         shop_id : 9380423,\n         shop_name :  \u5df4\u9ece\u5a5a\u7eb1\u56fd\u9645\u65d7\u8230\u5e97 ,\n         branch_name :  \u677e\u6c5f\u5e97 ,\n         city_name :  \u4e0a\u6d77 \n    },\n     desc :  \u8fd9\u662f\u4e00\u6bb5\u5185\u5bb9\u4e00\u6bb5\u5185\u5bb9 ,\n     discount_info :  \u53c8\u56de\u6765\u4e86 ,\n     allow_fabulous : false,  $$id :  a0ccdf50-ae2a-11e7-88bc-89a8406df769 \n}\ncontent = testData\nobserver(testData)\nnew Watch('title',function(){\n    console.log( todo update page title! )\n})\n\nnew Watch('shop_info.shop_name',function(){\n    console.log( todo update shop_info.shop_name! )\n})\n\nnew Watch(function(){\n    return this.shop_info.shop_name +  (  + this.shop_info.branch_name +  ) \n},function(){\n    console.log( todo update desc to dom  )\n})\nconsole.log( update title: )\ntestData.title =  \u7b2c\u4e00\u6b21\u66f4\u65b0 \ntestData.title =  \u7b2c\u4e8c\u6b21\u66f4\u65b0 \nconsole.log( update shop_info\uff1a )\ntestData.shop_info = {\n     shop_id : 1380423,\n     shop_name :  \u5df4\u9ece\u5a5a\u7eb1\u56fd\u9645\u65d7\u8230\u5e97 ,\n     branch_name :  \u660c\u5e73\u5e97 ,\n     city_name :  \u5317\u4eac \n}", 
            "title": "\u4ee3\u7801\u541b"
        }, 
        {
            "location": "/js/observer/#_2", 
            "text": "", 
            "title": "\u56fe\u89e3\u541b"
        }, 
        {
            "location": "/js/observer/#_3", 
            "text": "\u4f9d\u8d56\u6536\u96c6\u5173\u952e\u70b9\uff1a  1.\u4f7f\u7528Object.defineProperty\u8bbe\u7f6e\u5c5e\u6027\u4e3a\u53ef\u89c2\u6d4b\u5c5e\u6027\uff0c\u5373\u53d6\u503c\u89e6\u53d1get \u8d4b\u503c\u89e6\u53d1set\n2.\u521d\u59cb\u5316Watch\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u628a\u5f53\u524d\u5bf9\u8c61\u8bbe\u7f6e\u4e3a\u5168\u5c40\u7684target\uff0c\u6267\u884c\u89c2\u5bdf\u8005\u8868\u8fbe\u5f0f\uff0c\u89e6\u53d1\u6240\u4f9d\u8d56\u7684\u5c5e\u6027\u7684get\u51fd\u6570(\u8fdb\u884c\u4f9d\u8d56\u6536\u96c6)  \u4f9d\u8d56\u6536\u96c6\u5b8c\u6210\u540e\uff0c\u5b9e\u73b0\u8ba1\u7b97\u5c5e\u6027\uff0c\u6570\u636e- \u89c6\u56fe\u5355\u9879\u7ed1\u5b9a\uff0cso easy!!!", 
            "title": "\u4eba\u8bdd"
        }, 
        {
            "location": "/js/proxy/", 
            "text": "\u4ee3\u7801\u541b\n\n\nfunction observer(data) {\n    if (Object.prototype.toString.call(data) === '[object Object]') {\n        Object.keys(data).forEach(key=\n{\n            data[key] = observer(data[key])\n        })\n        var obj = new Proxy(data, {\n            get: function (target, key, receiver) {\n                console.log(`getting :`);\n                console.log(key);\n                return Reflect.get(target, key, receiver);\n            },\n            set: function (target, key, value, receiver) {\n                if (value === target[key]) {\n                    return\n                }\n                console.log(`setting :`)\n                console.log(key);\n                return Reflect.set(target, key,observer(value), receiver);\n            }\n        });\n        return obj\n    }\n    return data\n}\n\n\n\n\n//test\nvar testData = {\n    \nshop_info\n: {\n        \nbranch_name\n: \n\u677e\u6c5f\u5e97\n\n    },\n    \ndiscount_info\n: \n\u53c8\u56de\u6765\u4e86\n\n}\n\ntestData=observer(testData)\nconsole.log(\nupdate testData.shop_info.branch_name:\n)\ntestData.shop_info.branch_name =  \n\u660c\u5e73\u5e97\n\nconsole.log(\nupdate testData.shop_info.discount_info:\n)\ntestData.shop_info.discount_info = {c:0.9}\nconsole.log(\nget testData.shop_info.discount_info.c:\n)\ntestData.shop_info.discount_info.c\n\n\n\n\n\u4eba\u8bdd\n\n\n\u5173\u952e\u70b9\uff1a\n\n\n1.es6 Proxy \u53ef\u4ee5\u5bf9\u6574\u4e2a\u5bf9\u8c61\u8fdb\u884c\u62e6\u622a\u7684\u7279\u6027 \u5b9e\u73b0\u53d6\u503c\u89e6\u53d1get  \u8d4b\u503c\u89e6\u53d1set \n2.es6 Reflect \u5177\u6709\u8bed\u8a00\u5185\u90e8\u65b9\u6cd5 \u5177\u6709get-\n\u83b7\u53d6\u5c5e\u6027\u503c  set-\n\u8bbe\u7f6e\u5c5e\u6027\u503c\n\n\n\n\u5076\u7136\u5f97\u77e5vue3\u6253\u7b97\u4f7f\u7528proxy\u5b9e\u73b0\u6570\u636e\u89c2\u6d4b\u6a21\u5757\uff0c\u56fa\u8bd5\u7740\u5199\u4e86\u4e0b... \n\n\n\u4f5c\u4e3a\u6570\u636e\u89c2\u6d4b\u6a21\u5757\uff0c\u4ec5\u9700\u8981\u5b8c\u6210 target\u548ckey \u5173\u8054 Dep\u5bf9\u8c61\uff0c\u4f7f\u5f97\u4ee3\u7406get\u51fd\u6570\u4e2d\u53ef\u4ee5\u6839\u636etarget\u548ckey \u62ff\u5230\u5bf9\u5e94\u7684Dep\u5bf9\u8c61 \u6536\u96c6Watcher\uff0c\n\u540c\u7406set\u51fd\u6570\u83b7\u53d6Dep\u5bf9\u8c61\uff0c\u901a\u77e5\u6240\u6709\u7684Watcher\u6267\u884cupdate", 
            "title": "es6 proxy\u5b9e\u73b0\u53ef\u89c2\u6d4b\u6570\u636e"
        }, 
        {
            "location": "/js/proxy/#_1", 
            "text": "function observer(data) {\n    if (Object.prototype.toString.call(data) === '[object Object]') {\n        Object.keys(data).forEach(key= {\n            data[key] = observer(data[key])\n        })\n        var obj = new Proxy(data, {\n            get: function (target, key, receiver) {\n                console.log(`getting :`);\n                console.log(key);\n                return Reflect.get(target, key, receiver);\n            },\n            set: function (target, key, value, receiver) {\n                if (value === target[key]) {\n                    return\n                }\n                console.log(`setting :`)\n                console.log(key);\n                return Reflect.set(target, key,observer(value), receiver);\n            }\n        });\n        return obj\n    }\n    return data\n}  //test\nvar testData = {\n     shop_info : {\n         branch_name :  \u677e\u6c5f\u5e97 \n    },\n     discount_info :  \u53c8\u56de\u6765\u4e86 \n}\n\ntestData=observer(testData)\nconsole.log( update testData.shop_info.branch_name: )\ntestData.shop_info.branch_name =   \u660c\u5e73\u5e97 \nconsole.log( update testData.shop_info.discount_info: )\ntestData.shop_info.discount_info = {c:0.9}\nconsole.log( get testData.shop_info.discount_info.c: )\ntestData.shop_info.discount_info.c", 
            "title": "\u4ee3\u7801\u541b"
        }, 
        {
            "location": "/js/proxy/#_2", 
            "text": "\u5173\u952e\u70b9\uff1a  1.es6 Proxy \u53ef\u4ee5\u5bf9\u6574\u4e2a\u5bf9\u8c61\u8fdb\u884c\u62e6\u622a\u7684\u7279\u6027 \u5b9e\u73b0\u53d6\u503c\u89e6\u53d1get  \u8d4b\u503c\u89e6\u53d1set \n2.es6 Reflect \u5177\u6709\u8bed\u8a00\u5185\u90e8\u65b9\u6cd5 \u5177\u6709get- \u83b7\u53d6\u5c5e\u6027\u503c  set- \u8bbe\u7f6e\u5c5e\u6027\u503c  \u5076\u7136\u5f97\u77e5vue3\u6253\u7b97\u4f7f\u7528proxy\u5b9e\u73b0\u6570\u636e\u89c2\u6d4b\u6a21\u5757\uff0c\u56fa\u8bd5\u7740\u5199\u4e86\u4e0b...   \u4f5c\u4e3a\u6570\u636e\u89c2\u6d4b\u6a21\u5757\uff0c\u4ec5\u9700\u8981\u5b8c\u6210 target\u548ckey \u5173\u8054 Dep\u5bf9\u8c61\uff0c\u4f7f\u5f97\u4ee3\u7406get\u51fd\u6570\u4e2d\u53ef\u4ee5\u6839\u636etarget\u548ckey \u62ff\u5230\u5bf9\u5e94\u7684Dep\u5bf9\u8c61 \u6536\u96c6Watcher\uff0c\n\u540c\u7406set\u51fd\u6570\u83b7\u53d6Dep\u5bf9\u8c61\uff0c\u901a\u77e5\u6240\u6709\u7684Watcher\u6267\u884cupdate", 
            "title": "\u4eba\u8bdd"
        }
    ]
}